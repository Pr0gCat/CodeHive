# 響應式佈局設計 (Responsive Layout Design)

## 概述

CodeHive 的 Kanban 看板採用響應式設計，確保代理狀態面板在任何窗口寬度下都能提供最佳的用戶體驗。

## 佈局結構

### 1. 代理狀態面板 (獨立區域)

- **響應式寬度**：根據屏幕尺寸自動調整
  - 默認：`w-64` (256px)
  - 大屏幕 (lg)：`w-72` (288px)
  - 超大屏幕 (xl)：`w-80` (320px)
  - 2K 屏幕 (2xl)：`w-96` (384px)
- **固定位置**：左側固定，始終可見
- **獨立顯示**：不依賴於任何標籤頁面
- **可滾動**：內容超出時可垂直滾動

### 2. 標籤式導航

- **固定高度**：標籤欄位固定在主內容區域頂部
- **水平滾動**：標籤過多時可水平滾動，確保代理狀態面板始終可見
- **最小寬度**：使用 `min-w-max` 確保標籤內容不被壓縮
- **背景色**：使用 `bg-primary-950` 提供視覺分離

### 3. 主內容區域

- **彈性寬度**：佔據剩餘的所有空間
- **標籤切換**：在 Kanban 看板和諮詢之間切換
- **獨立佈局**：每個標籤頁面有獨立的佈局

### 4. Kanban 看板

- **全寬顯示**：在標籤頁面內佔據全部可用空間
- **水平滾動**：列數過多時可水平滾動
- **響應式列寬**：每列最小寬度 320px

## 響應式斷點

### Tailwind CSS 斷點

```css
/* 默認 (移動設備) */
@media (min-width: 0px) { ... }

/* 小屏幕 (sm) */
@media (min-width: 640px) { ... }

/* 中等屏幕 (md) */
@media (min-width: 768px) { ... }

/* 大屏幕 (lg) */
@media (min-width: 1024px) { ... }

/* 超大屏幕 (xl) */
@media (min-width: 1280px) { ... }

/* 2K 屏幕 (2xl) */
@media (min-width: 1536px) { ... }
```

### 代理狀態面板寬度對應

| 屏幕尺寸      | 寬度  | 適用場景           |
| ------------- | ----- | ------------------ |
| 默認          | 256px | 筆記本電腦、小屏幕 |
| lg (1024px+)  | 288px | 桌面顯示器         |
| xl (1280px+)  | 320px | 大顯示器           |
| 2xl (1536px+) | 384px | 2K/4K 顯示器       |

## 組件設計

### AgentStatusPanel 組件 (獨立區域)

```tsx
// 響應式容器 - 獨立於標籤頁面
<div className="w-64 lg:w-72 xl:w-80 2xl:w-96 p-4 bg-primary-950 border-r border-primary-800 h-full overflow-y-auto flex-shrink-0">
  <AgentStatusPanel projectId={project.id} />
</div>

// 主內容區域佈局
<div className="flex-1 flex flex-col">
  {/* 標籤導航 */}
  <div className="flex border-b border-primary-800 bg-primary-950">
    {/* 標籤按鈕 */}
  </div>

  {/* 標籤內容 */}
  <div className="flex-1 overflow-hidden">
    {/* Kanban 看板 - 全寬顯示 */}
    <div className="h-full">
      <KanbanBoard {...props} />
    </div>
  </div>
</div>
```

### 內部佈局

- **全寬容器**：`w-full` 確保內容填滿容器
- **彈性佈局**：`flex flex-col` 垂直排列
- **卡片設計**：使用圓角和陰影提升視覺效果
- **網格佈局**：任務統計使用 2 列網格

## 用戶體驗優化

### 1. 視覺層次

- **背景分離**：代理狀態面板使用深色背景
- **邊框分隔**：右邊框清晰分離兩個區域
- **圓角設計**：內部卡片使用圓角提升現代感

### 2. 交互設計

- **懸停效果**：按鈕和可點擊元素有懸停狀態
- **焦點指示**：鍵盤導航時有清晰的焦點指示
- **滾動指示**：內容超出時顯示滾動條

### 3. 性能優化

- **固定寬度**：避免不必要的重新計算
- **硬件加速**：使用 `transform` 進行動畫
- **懶加載**：按需加載內容

## 適配性考慮

### 1. 小屏幕適配

- **最小寬度**：確保內容不會被壓縮
- **滾動支持**：內容超出時可滾動查看
- **觸控友好**：按鈕大小適合觸控操作
- **獨立顯示**：代理狀態面板始終可見，不受標籤切換影響

### 2. 大屏幕利用

- **寬度擴展**：充分利用大屏幕空間
- **內容密度**：適當增加內容密度
- **視覺平衡**：保持左右區域的視覺平衡
- **並行顯示**：代理狀態和主內容區域並行顯示

### 3. 高分辨率支持

- **清晰度**：確保在高 DPI 屏幕上清晰顯示
- **比例適配**：保持元素比例的一致性
- **字體渲染**：優化字體在高分辨率下的顯示

## 開發指南

### 1. 添加新的響應式斷點

```tsx
// 在組件中添加新的斷點
<div className="w-80 lg:w-96 xl:w-[28rem] 2xl:w-[32rem] 3xl:w-[36rem]">
  {/* 內容 */}
</div>
```

### 2. 測試響應式佈局

```bash
# 使用瀏覽器開發者工具測試不同屏幕尺寸
# 常見測試尺寸：
# - 320px (手機)
# - 768px (平板)
# - 1024px (小筆記本)
# - 1280px (桌面)
# - 1920px (大顯示器)
```

### 3. 性能監控

```tsx
// 監控佈局變化
useEffect(() => {
  const handleResize = () => {
    // 記錄佈局變化
    console.log('Layout changed:', window.innerWidth);
  };

  window.addEventListener('resize', handleResize);
  return () => window.removeEventListener('resize', handleResize);
}, []);
```

## 最佳實踐

### 1. 設計原則

- **一致性**：保持所有屏幕尺寸下的一致性
- **可用性**：確保所有功能在所有尺寸下都可用
- **性能**：避免不必要的複雜計算

### 2. 代碼組織

- **組件化**：將響應式邏輯封裝在組件內
- **可維護性**：使用清晰的類名和註釋
- **可擴展性**：設計時考慮未來的擴展需求

### 3. 測試策略

- **多設備測試**：在真實設備上測試
- **自動化測試**：使用工具自動化響應式測試
- **用戶反饋**：收集用戶在不同設備上的使用反饋

這個響應式設計確保了 CodeHive 在任何設備上都能提供優秀的用戶體驗。
